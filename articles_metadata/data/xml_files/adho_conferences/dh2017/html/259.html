<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><meta name="generator" content="ABBYY FineReader 14"/><title>Microsoft Word - 259. Rosenthaler-Integrating Image Resources Into Virtual Research Environments For The Humanities -259.docx</title><link rel="stylesheet" href="259_files/259.css" type="text/css"/>
</head>
<body>
<p><span class="font2" style="font-weight:bold;">Integrating Image Resources Into Virtual Research&nbsp;Environments For The&nbsp;Humanities - a Simple&nbsp;Image Presentation Interface&nbsp;(SIPI) based on IIIF</span></p>
<p><span class="font4" style="font-weight:bold;">Lukas Rosenthaler</span></p>
<p><span class="font4"><a href="mailto:lukas.rosenthaler@unibas.ch">lukas.rosenthaler@unibas.ch</a></span></p>
<p><span class="font4">University of Basel, Switzerland</span></p>
<p><span class="font4" style="font-weight:bold;">Andrea Bianco</span></p>
<p><span class="font4"><a href="mailto:andrea.bianco@unibas.ch">andrea.bianco@unibas.ch</a></span></p>
<p><span class="font4">University of Basel, Switzerland</span></p>
<p><span class="font4" style="font-weight:bold;">Peter Fornaro</span></p>
<p><span class="font4"><a href="mailto:peter.fornaro@unibas.ch">peter.fornaro@unibas.ch</a></span></p>
<p><span class="font4">University of Basel, Switzerland</span></p><h1><a name="caption1"></a><a name="bookmark0"></a><span class="font1" style="font-weight:bold;">Introduction</span></h1>
<p><span class="font4">Presenting images on the web has a long tradition. The &lt;img&gt;-tag was proposed February 1993 by Marc&nbsp;Andreessen, at this time employed by the National&nbsp;Center for Supercomputing Applications of the University of Illinois at Urbana-Champaign, a pioneering institution for the development of the World Wide Web.&nbsp;Marc Andreessen later founded Netscape, the browser&nbsp;that helped to make the web popular. Its most simple&nbsp;form, the image tag contained an src-attribute containing the URL of the image, such as </span><span class="font4" style="font-weight:bold;">&lt;img&nbsp;src=“<a href="http://dhlab.unibas.ch/imgs/sample.jpg">http://dhlab.unibas.ch/imgs/sample.jpg</a>&quot;&gt;.</span></p>
<p><span class="font4">Basically, the mechanism to include images into a website has since remained the same. The dynamic manipulation of the DOM with JavaScript (also a invention introduced by Marc Andreessen and Netscape) allowed users to dynamically add, delete or exchange&nbsp;images within a website. Thus complex web-applications that dealt dynamically with images became possible.</span></p>
<p><span class="font4">However, while on the side of the browser some scaling is possible, the URL had to address an image&nbsp;file with fixed properties (file format, image size etc.).&nbsp;As the computing power of servers grew, it became&nbsp;possible to render the image on the fly with properties&nbsp;that are passed using the HTTP request (e.g. embedded in the URL or as URL-parameters). Recently, the&nbsp;International Image Interoperability Framework&nbsp;(IIIF) emerged as a standard syntax to pass parameters such as image size in pixels, cropping region, rotation angle and file format using a well-defined URL&nbsp;syntax. The IIIF-standard allows to share image resources between web-applications such as Virtual Research Environments (VRE) in a standardized way.&nbsp;There are quite a few IIIF-compliant image servers&nbsp;around, some using a native implementation, some&nbsp;wrapping image transformation programs using a&nbsp;script language such as python.</span></p>
<p><span class="font4">By a mandate of the State Secretariat for Education, Research and Innovation (SERI), the Swiss Academy of&nbsp;Humanities and Social Sciences (SAHSS) has created a&nbsp;new institution for the preservation and long-term curation of research data in the humanities (Data and&nbsp;Service Center for the Humanities, DaSCH). It ensures&nbsp;permanent access to research data in order to make it&nbsp;available for further research. A pilot program started&nbsp;in 2013 and has been successfully finished. The DaSCH&nbsp;will be permanently installed on January 1st 2017, to&nbsp;guarantee seamless services. The Digital Humanities&nbsp;Lab (DHLab) of the University of Basel has been mandated with the operation of the new institution. For&nbsp;this purposed, DHLab has developed a flexible platform based on semantic web technologies (RDF, RDFS,&nbsp;OWL). Besides text sources, about 500,000 high-resolution images have been ingested to the system during&nbsp;the pilot phase. We decided to use IIIF for presenting&nbsp;the images in order to maximize the interoperability&nbsp;with external systems. Furthermore, we need to preserve only one image file, since IIIF allows using the&nbsp;archiving master also for dissemination and presentation. However, none of the existing IIIF-compliant&nbsp;servers satisfied our needs.</span></p><h1><a name="bookmark1"></a><span class="font1" style="font-weight:bold;">Design Requirements</span></h1>
<p><span class="font4">Therefore, we decided to design and implement our own IIIF server guided by the following requirements:</span></p>
<p><span class="font0">• </span><span class="font4">Interoperability with internal databases (e.g. RDF-triplestores, RDBMS etc.) containing&nbsp;annotations, metadata etc. as well as access&nbsp;permissions.</span></p>
<p><span class="font0">• </span><span class="font4">Preservation of all embedded metadata (e.g.</span></p>
<p><span class="font4">EXIF, XMP, TIFF etc.) during all format conversions</span></p>
<p><span class="font0">• </span><span class="font4">ICC color profile conversions where necessary</span></p>
<p><span class="font0">• </span><span class="font4">User authentication compatible with the</span></p>
<p><span class="font4" style="text-decoration:underline;">proposed draft of the IIIF for authentication</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">High-performance transformation of images</span></p>
<p><span class="font4">including rotation, format conversions (e.g.</span></p>
<p><span class="font4">16 bit to 8 bit depth) etc.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Support of Secure Socket Layer (SSL/https)</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">A configurable image cache in order to reduce the computational load on the server</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Support of cross origin resource sharing&nbsp;(CORS)</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Import and transformation of images. The&nbsp;server must be able to import images and&nbsp;convert them to the desired master file format (in our case JPEG2000).</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Features beyond the scope of the IIIF-stand-ard such as adding watermarks, size restrictions etc.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Integrated simple webserver functionality</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Modular extensibility, e.g. integrating support for RTI imaging (both initial transformation and serving a web-based RTI-viewer&nbsp;- Fornaro et al, 2016)</span></p><h1><a name="bookmark2"></a><span class="font1" style="font-weight:bold;">Implementation</span></h1>
<p><span class="font4">In order to fulfill these requirements, we decided to use C++11 to develop a native, modular, high performance IIIF-compliant image server. A decisive feature&nbsp;was to make the server scriptable with a script language without compromising on performance. We decided to use </span><span class="font4" style="text-decoration:underline;">Lua</span><span class="font4">, an extremely fast, performing, and&nbsp;extensible script language with a small footprint that&nbsp;has only small overhead. It is widely in use for computer games such as World of Warcraft or Minecraft.&nbsp;In order to support different image file formats, we use&nbsp;open source libraries such as libtiff, libjpeg etc. and a&nbsp;modular, extensible architecture. In order to support&nbsp;the JPEG2000 image format, we rely on the </span><span class="font4" style="text-decoration:underline;">kakadu-library</span><span class="font4">. Unfortunately kakadu is not open source, but it&nbsp;is one of the most performant JPEG2000-libraries&nbsp;available. In addition, when acquiring a license, the full&nbsp;source code is provided. Depending on the licensing&nbsp;model, the free distribution of binary packages is included.</span></p>
<p><span class="font4">In order to reduce the computational load of the server, an efficient caching service has been implemented. The canonical IIIF-URL is used as key for caching since it is unique for each parameter set of the IIIF&nbsp;request.</span></p>
<p><span class="font4">The Lua-interpreter has been extended with SIPI-specific functionality. Using configurable routes, a fully IIIF-compliant image server has been implemented&nbsp;with the following features:</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Full support of SSL (https) using the&nbsp;OpenSSL library.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Preservation of metadata. We use the open&nbsp;source </span><span class="font4" style="text-decoration:underline;">exiv2 library</span><span class="font4"> and own parsing/gener-ating routines to bridge the differences between the different image formats.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">ICC profiles are interpreted and converted&nbsp;using the open source </span><span class="font4" style="text-decoration:underline;">“little cms” library</span><span class="font4">.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Before serving an image, a configurable preflight lua-script may be executed. Within this&nbsp;script different tasks can be performed, e.g.&nbsp;querying a database for access rights, adding&nbsp;watermarks, ICC profile conversions etc.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Native support of JSON Web Tokens. JWT's&nbsp;may be analyzed using simple Lua functions&nbsp;(e.g. in the pre-flight script) for authentication and access control.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Querying other databases using RESTful services. These RESTful query functions are&nbsp;also exposed to Lua.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Image upload using HTTP multipart/form-data headers. The upload process and file&nbsp;conversions can be controlled with simple&nbsp;Lua scripts.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Cache control with a simple web-based administration interface.</span></p>
<p><span class="font0">• &nbsp;&nbsp;&nbsp;</span><span class="font4">Native support for sqlite3 databases from&nbsp;the embedded Lua.</span></p>
<p><span class="font4">SIPI is open source and can be found on </span><span class="font4" style="text-decoration:underline;">Github</span><span class="font4">. In order to use the JPEG2000 format, a licensed copy of the kakadu library has to be provided by the user. We will&nbsp;provide an extensive manual and binary downloads&nbsp;(including JPEG2000 support) for all major Linux distributions, OS X and a docker image on <a href="http://sipi.io">http://sipi.io</a>&nbsp;</span><span class="font1" style="font-weight:bold;">Conclusion</span></p>
<p><span class="font4">SIPI is a fully IIIF-compliant native image server which integrates extremely well into existing platforms. The flexibility provided by the embedded&nbsp;scripting language, as well as the features going beyond the IIIF specification, allow the integration of&nbsp;IIIIF-based interoperability into existing imaging platforms and image repositories. The support of the secure socket layer (https) access control is a necessity&nbsp;in the environment of digital humanities.</span></p>
<p><span class="font4">SIPI can easily be customized and extended for special purposes. Elaborated imaging methods (e.g. support for multi-spectral images, image processing functions etc.) could be implemented using the existing SIPI server as base. However, such enhancements will</span></p>
<p><span class="font4">require extensions to the IIIF-syntax. Further development at the DHLab will include the preprocessing of RTI-images as well support for other media types such&nbsp;as PDF and moving image. We are also working on the&nbsp;implementation of the Amazon S3 client-API in order&nbsp;for SIPI to directly serve images that are stored in a S3&nbsp;compatible cloud storage.</span></p><h1><a name="bookmark3"></a><span class="font1" style="font-weight:bold;">Bibliography</span></h1>
<p><span class="font3" style="font-weight:bold;">Fornaro, P., Bianco, A., Rosenthaler, L., </span><span class="font3">(2016) Digital Materiality with Enhanced Reflectance Transformation Imaging. Archiving Conference. 19. April 2016 Vol., no. 1, p. 11-14</span></p>
</body>
</html>